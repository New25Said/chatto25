<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>ðŸ’¬ Chat WhatsApp Style</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

<div id="chat-app">
  <!-- ===== Sidebar ===== -->
  <div id="sidebar">
    <div id="sidebar-header">ðŸ’¬ Chat</div>
    <input id="search-contact" placeholder="Buscar..."/>
    <ul id="chat-list"></ul>
    <button id="create-group">âž• Crear Grupo</button>
  </div>

  <!-- ===== Main Chat ===== -->
  <div id="main">
    <div id="chat-header">Selecciona un chat</div>
    <div id="messages"></div>
    <div id="input-area">
      <input id="message-input" placeholder="Escribe un mensaje..."/>
      <button id="send">Enviar</button>
    </div>
  </div>
</div>

<!-- ===== Modal Crear Grupo ===== -->
<div id="group-modal">
  <div class="modal-content">
    <h2>Crear grupo</h2>
    <input id="group-name" placeholder="Nombre del grupo"/>
    <div id="user-list"></div>
    <div class="modal-buttons">
      <button id="confirm-create-group">Crear</button>
      <button id="cancel-group">Cancelar</button>
    </div>
  </div>
</div>

<script>
  // ===== Datos iniciales =====
  const contacts = ["Ana","Luis","Carlos","MarÃ­a","Pedro"];
  const chatList = document.getElementById("chat-list");
  const messagesDiv = document.getElementById("messages");
  const chatHeader = document.getElementById("chat-header");
  const sendBtn = document.getElementById("send");
  const msgInput = document.getElementById("message-input");

  let currentChat = null;
  let chats = {};

  // ===== Render lista de chats =====
  function renderChats(){
    chatList.innerHTML="";
    Object.keys(chats).forEach(name=>{
      const li = document.createElement("li");
      li.textContent = name;
      li.onclick=()=>{
        currentChat=name;
        chatHeader.textContent=name;
        renderMessages();
      };
      chatList.appendChild(li);
    });
  }

  // ===== Render mensajes =====
  function renderMessages(){
    messagesDiv.innerHTML="";
    if(!currentChat) return;
    chats[currentChat].forEach(msg=>{
      const div=document.createElement("div");
      div.className="message";
      div.textContent=msg;
      messagesDiv.appendChild(div);
    });
  }

  // ===== Enviar mensaje =====
  sendBtn.onclick=()=>{
    if(!currentChat) return;
    if(msgInput.value.trim()==="") return;
    chats[currentChat].push(msgInput.value.trim());
    msgInput.value="";
    renderMessages();
  };

  // ===== Crear Grupo =====
  const createGroupBtn=document.getElementById("create-group");
  const groupModal=document.getElementById("group-modal");
  const groupNameInput=document.getElementById("group-name");
  const groupUsersDiv=document.getElementById("user-list");
  const confirmCreateGroup=document.getElementById("confirm-create-group");
  const cancelGroupBtn=document.getElementById("cancel-group");

  // Abrir modal
  createGroupBtn.onclick=()=>{
    groupModal.classList.add("active");
    groupUsersDiv.innerHTML="";
    contacts.forEach(c=>{
      const div=document.createElement("div");
      const cb=document.createElement("input");
      cb.type="checkbox";
      cb.value=c;
      const label=document.createElement("label");
      label.textContent=c;
      div.appendChild(cb);
      div.appendChild(label);
      groupUsersDiv.appendChild(div);
    });
  };

  // Cancelar modal
  cancelGroupBtn.onclick=()=>{
    groupModal.classList.remove("active");
    groupNameInput.value="";
  };

  // Confirmar crear grupo
  confirmCreateGroup.onclick=()=>{
    const name=groupNameInput.value.trim();
    if(!name) return alert("Ponle nombre al grupo");
    const selected=[...groupUsersDiv.querySelectorAll("input:checked")].map(cb=>cb.value);
    if(selected.length<1) return alert("Selecciona al menos un integrante");

    chats[name]=[];
    renderChats();
    groupModal.classList.remove("active");
    groupNameInput.value="";
  };

  // Inicializar con chats individuales
  contacts.forEach(c=>{ chats[c]=[]; });
  renderChats();
</script>

</body>
</html>
